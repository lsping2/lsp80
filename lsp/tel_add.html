<?
$number = '01083083678';

$after = "";
$nums = explode("\n", $number);

foreach($nums as $num) {
	$after .= tel_format(trim($num))."\n";
}

function jdTelnumberFormat($str='') {
	$tmp = substr($str, 0, 4);
	
	switch($tmp) {
		case '1544': case '1588':
			$num = preg_replace("/([0-9]{4})-?([0-9]{4}).*/", "\\1-\\2", $str);
			break;
		default:
			$num = preg_replace("/(0505|02|0[0-9]{2})-?([0-9]{3,4})-?([0-9]{4}).*/", "\\1-\\2-\\3", $str);
			break;
	}
	
	return $num;
}
function tel_format($str) { return jdTelnumberFormat($str); }

?>
<h2>문자를 전화번호 형식으로 변환</h2>
<textarea style="width:100%;height:200px;"><?=trim($number)?></textarea>
<h3>After</h3>
<textarea style="width:100%;height:200px;"><?=trim($after)?></textarea>

<?=jdTelnumberFormat('0314141232')?>
