<?

$left_count = 10; // 좌측개수
$height = 300; // 그래프 높이
$width = 500; // 그래프 가로길이
$title = "희망반 평균점수 분석"; // 그래프 타이틀
$left_name = "점수"; // 왼쪽 설명
$bottom_name = "이름"; // 하단 설명
$name = array("김","노","최","정","홍","이"); // 그래프 각각 이름
$value = array("100","85","100","50","70","35"); // 그래프 각각 값

// 최대값 구하기
for($i=0;$i<count($value);$i++){
if($max < $value[$i]){$max = $value[$i];}
}

echo "<table cellpadding='0' cellspacing='0' border=0 height=$height width=$width style='font-size:9pt; border-collapse:collapse;'>";
echo "<caption><h4>$title</h4></caption>";
echo "<tr>";

// 왼쪽 설명
$left_con = $left_count+1;
echo "<td align=center rowspan=$left_con width=5>∧".$left_name."∨</td>";

// 그래프간 치수를 맞추기위해 꽁수
echo "<td align=right valign=top height=5 width=50></td><td width=10 valign=top style='border-width:1; border-color:black; border-right-style:solid;'></td>\n";

// 그래프 넣기
for ($s=0;$s<count($value);$s++){
$var_hight = round($value[$s]/$max*100); // 그래프바 크기
$var_minus = 100-$var_hight; // 그래프 바 나머지 크기
$rows = $left_count+1; // 셀(세로) 합치기

echo "<td rowspan=$rows valign=bottom align=center height=$height>

<table cellpadding='0' cellspacing='0' border=0 height='$var_minus%' width=20><tr><td width=20 height='$var_minus%'></td></tr></table>

<span style=font-size:8pt;>".number_format($value[$s])."</span>

<table cellpadding='0' cellspacing='0' border=0 height='$var_hight%' width=20
style='filter=progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr=#B1C7F9, 
EndColorStr=#EEF2FC)'><tr><td width=20 height='$var_hight%'></td></tr></table></td>\n";
}

echo "</tr>";

// 왼쪽 값 수치 정렬
for ($i=0;$i<$left_count;$i++){
$left_value = round($max * ($left_count - $i) / $left_count);
echo "<tr>
<td align=right valign=top>".number_format($left_value,0)."&nbsp;</td>
<td valign=top style='border-width:1; border-color:black; border-right-style:solid;'>―</td></tr>";
}

// 하단의 값 이름
echo "<tr height=30><td colspan=3>&nbsp;</td>";
for ($s=0;$s<count($name);$s++){
echo "<td align=center style='border-width:1; border-color:black; border-top-style:solid;'>$name[$s]</td>";
}
    echo "</tr>";

// 하단 글 설명

echo "<tr><td colspan=3>&nbsp;</td><td colspan=".count($name)." align=center>< $bottom_name ></td></tr>";
?>
</table> 


